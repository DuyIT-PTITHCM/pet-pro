import{H as l}from"./Const.4ee2e7e1.js";import{a as o,c as y}from"./cart.e2464a95.js";import{t as i}from"./toastError.26f99cd1.js";import{r as m,s as c,g as n}from"./cookieUtils.9487ed92.js";async function q(t){let s=[],u=await JSON.parse(t.images),r={id:t.id,name:t.productName,origin:t.origin,image:l+u[0],url:t.slug,price:t.price,quantityStock:t.stockQuantity,quantity:1,isSelect:!1};o.subscribe(e=>{e&&(s=JSON.parse(e))});var a=s.find(e=>e.id==r.id);a?a.quantity<20?a.quantity+1<=r.quantityStock?(a.quantity+=1,s.map(e=>e.id===(a==null?void 0:a.id)?a:e),i.set([{message:"Add to cart success",type:"success"}])):i.set([{message:"Can not add more product",type:"error"}]):i.set([{message:"Quantity can not over than 20",type:"error"}]):(s.push(r),i.set([{message:"Add to cart success",type:"success"}]));let f=s.reduce(function(e,d){return e+d.quantity},0);const g=JSON.stringify(s);m("cart"),c("cart",g),o.set(n("cart")),c("cartQuantity",f),y.set(n("cartQuantity"))}async function N(t){const s=JSON.stringify(t);m("cart"),c("cart",s),o.set(n("cart"));let u=t.reduce(function(r,a){return r+a.quantity},0);c("cartQuantity",u),y.set(n("cartQuantity"))}export{q as a,N as u};
