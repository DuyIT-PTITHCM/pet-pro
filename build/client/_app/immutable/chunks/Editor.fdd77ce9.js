import{s as Q,a2 as U,o as V,a3 as H,g as M,h as B,i as z,k as A,w as T,f as D,j as ae,N as le}from"./scheduler.1757bee3.js";import{g as W}from"./globals.7f7f1b26.js";import{S as Y,i as Z,d as P,v as $,e as C,g as k,a as I,u as de,j as ue,k as fe,m as me,b as he,t as ge,l as we}from"./index.caaf1ae9.js";import{H as G}from"./Const.4ee2e7e1.js";import{R as q}from"./RepositoryFactory.6988031d.js";import{t as N}from"./toastError.e551f045.js";const be=["Activate","AddUndo","BeforeAddUndo","BeforeExecCommand","BeforeGetContent","BeforeRenderUI","BeforeSetContent","BeforePaste","Blur","Change","ClearUndos","Click","ContextMenu","Copy","Cut","Dblclick","Deactivate","Dirty","Drag","DragDrop","DragEnd","DragGesture","DragOver","Drop","ExecCommand","Focus","FocusIn","FocusOut","GetContent","Hide","Init","KeyDown","KeyPress","KeyUp","LoadContent","MouseDown","MouseEnter","MouseLeave","MouseMove","MouseOut","MouseOver","MouseUp","NodeChange","ObjectResizeStart","ObjectResized","ObjectSelected","Paste","PostProcess","PostRender","PreProcess","ProgressState","Redo","Remove","Reset","ResizeEditor","SaveContent","SelectionChange","SetAttrib","SetContent","Show","Submit","Undo","VisualAid"],X=(o,e)=>{be.forEach(n=>{o.on(n,a=>{e(n.toLowerCase(),{eventName:n,event:a,editor:o})})})},{Object:ye}=W,F="node_modules/@tinymce/tinymce-svelte/dist/component/Editor.svelte";function ee(o){let e;const n={c:function(){e=M("textarea"),this.h()},l:function(s){e=B(s,"TEXTAREA",{id:!0,style:!0}),z(e).forEach(C),this.h()},h:function(){k(e,"id",o[0]),ae(e,"visibility","hidden"),A(e,F,130,2,4109)},m:function(s,i){I(s,e,i),o[18](e)},p:function(s,i){i&1&&k(e,"id",s[0])},d:function(s){s&&C(e),o[18](null)}};return P("SvelteRegisterBlock",{block:n,id:ee.name,type:"else",source:"(130:0) {:else}",ctx:o}),n}function te(o){let e;const n={c:function(){e=M("div"),this.h()},l:function(s){e=B(s,"DIV",{id:!0}),z(e).forEach(C),this.h()},h:function(){k(e,"id",o[0]),A(e,F,128,2,4059)},m:function(s,i){I(s,e,i),o[17](e)},p:function(s,i){i&1&&k(e,"id",s[0])},d:function(s){s&&C(e),o[17](null)}};return P("SvelteRegisterBlock",{block:n,id:te.name,type:"if",source:"(128:0) {#if inline}",ctx:o}),n}function O(o){let e;function n(d,c){return d[1]?te:ee}let a=n(o),s=a(o);const i={c:function(){e=M("div"),s.c(),this.h()},l:function(c){e=B(c,"DIV",{class:!0});var r=z(e);s.l(r),r.forEach(C),this.h()},h:function(){k(e,"class",o[2]),A(e,F,126,0,3999)},m:function(c,r){I(c,e,r),s.m(e,null),o[19](e)},p:function(c,[r]){a===(a=n(c))&&s?s.p(c,r):(s.d(1),s=a(c),s&&(s.c(),s.m(e,null))),r&4&&k(e,"class",c[2])},i:T,o:T,d:function(c){c&&C(e),s.d(),o[19](null)}};return P("SvelteRegisterBlock",{block:i,id:O.name,type:"component",source:"",ctx:o}),i}const x=o=>o+"_"+Math.floor(Math.random()*1e9)+String(Date.now()),ne=()=>{let o={listeners:[],scriptId:x("tiny-script"),scriptLoaded:!1,injected:!1};const e=(a,s,i,d)=>{o.injected=!0;const c=s.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.src=i,c.onload=()=>{d()},s.head&&s.head.appendChild(c)};return{load:(a,s,i)=>{o.scriptLoaded?i():(o.listeners.push(i),o.injected||e(o.scriptId,a,s,()=>{o.listeners.forEach(d=>d()),o.scriptLoaded=!0}))}}};let J=ne();function Ee(o,e,n){let{$$slots:a={},$$scope:s}=e;$("Editor",a,[]);var i;let{id:d=x("tinymce-svelte")}=e,{inline:c=void 0}=e,{disabled:r=!1}=e,{apiKey:h="no-api-key"}=e,{channel:w="6"}=e,{scriptSrc:l=void 0}=e,{conf:b={}}=e,{modelEvents:_="change input undo redo"}=e,{value:f=""}=e,{text:E=""}=e,{cssClass:p="tinymce-wrapper"}=e,y,u,m,v=f,S=r;const L=U(),j=()=>{const g=(()=>typeof window<"u"?window:global)();return g&&g.tinymce?g.tinymce:null},R=()=>{const t=Object.assign(Object.assign({},b),{target:u,inline:c!==void 0?c:b.inline!==void 0?b.inline:!1,readonly:r,setup:g=>{n(14,m=g),g.on("init",()=>{g.setContent(f),g.on(_,()=>{n(15,v=g.getContent()),v!==f&&(n(5,f=v),n(6,E=g.getContent({format:"text"})))})}),X(g,L),typeof b.setup=="function"&&b.setup(g)}});n(4,u.style.visibility="",u),j().init(t)};V(()=>{if(j()!==null)R();else{const t=l||`https://cdn.tiny.cloud/1/${h}/tinymce/${w}/tinymce.min.js`;J.load(y.ownerDocument,t,()=>{R()})}}),H(()=>{var t;m&&((t=j())===null||t===void 0||t.remove(m))});const se=["id","inline","disabled","apiKey","channel","scriptSrc","conf","modelEvents","value","text","cssClass"];ye.keys(e).forEach(t=>{!~se.indexOf(t)&&t.slice(0,2)!=="$$"&&t!=="slot"&&console.warn(`<Editor> was created with unknown prop '${t}'`)});function ie(t){D[t?"unshift":"push"](()=>{u=t,n(4,u)})}function ce(t){D[t?"unshift":"push"](()=>{u=t,n(4,u)})}function re(t){D[t?"unshift":"push"](()=>{y=t,n(3,y)})}return o.$$set=t=>{"id"in t&&n(0,d=t.id),"inline"in t&&n(1,c=t.inline),"disabled"in t&&n(7,r=t.disabled),"apiKey"in t&&n(8,h=t.apiKey),"channel"in t&&n(9,w=t.channel),"scriptSrc"in t&&n(10,l=t.scriptSrc),"conf"in t&&n(11,b=t.conf),"modelEvents"in t&&n(12,_=t.modelEvents),"value"in t&&n(5,f=t.value),"text"in t&&n(6,E=t.text),"cssClass"in t&&n(2,p=t.cssClass)},o.$capture_state=()=>({_a:i,uuid:x,createScriptLoader:ne,scriptLoader:J,_a:i,onMount:V,createEventDispatcher:U,onDestroy:H,bindHandlers:X,id:d,inline:c,disabled:r,apiKey:h,channel:w,scriptSrc:l,conf:b,modelEvents:_,value:f,text:E,cssClass:p,container:y,element:u,editorRef:m,lastVal:v,disablindCache:S,dispatch:L,getTinymce:j,init:R}),o.$inject_state=t=>{"_a"in t&&n(13,i=t._a),"id"in t&&n(0,d=t.id),"inline"in t&&n(1,c=t.inline),"disabled"in t&&n(7,r=t.disabled),"apiKey"in t&&n(8,h=t.apiKey),"channel"in t&&n(9,w=t.channel),"scriptSrc"in t&&n(10,l=t.scriptSrc),"conf"in t&&n(11,b=t.conf),"modelEvents"in t&&n(12,_=t.modelEvents),"value"in t&&n(5,f=t.value),"text"in t&&n(6,E=t.text),"cssClass"in t&&n(2,p=t.cssClass),"container"in t&&n(3,y=t.container),"element"in t&&n(4,u=t.element),"editorRef"in t&&n(14,m=t.editorRef),"lastVal"in t&&n(15,v=t.lastVal),"disablindCache"in t&&n(16,S=t.disablindCache)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&123040&&(m&&v!==f&&(m.setContent(f),n(6,E=m.getContent({format:"text"}))),m&&r!==S&&(n(16,S=r),typeof(n(13,i=m.mode)===null||i===void 0?void 0:i.set)=="function"?m.mode.set(r?"readonly":"design"):m.setMode(r?"readonly":"design")))},[d,c,p,y,u,f,E,r,h,w,l,b,_,i,m,v,S,ie,ce,re]}class oe extends Y{constructor(e){super(e),Z(this,e,Ee,O,Q,{id:0,inline:1,disabled:7,apiKey:8,channel:9,scriptSrc:10,conf:11,modelEvents:12,value:5,text:6,cssClass:2}),P("SvelteRegisterComponent",{component:this,tagName:"Editor",options:e,id:O.name})}get id(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get inline(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set inline(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get disabled(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set disabled(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get apiKey(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set apiKey(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get channel(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set channel(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get scriptSrc(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set scriptSrc(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get conf(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set conf(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get modelEvents(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set modelEvents(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get text(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set text(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get cssClass(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set cssClass(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{console:pe}=W;function K(o){let e,n,a;function s(c){o[3](c)}let i={apiKey:"4zwho6iauuup5m7zl61gs294kuht6k9pzbwz87v7hnpkhh10",id:o[1],inline:"false",disabled:"false",conf:o[2],modelEvents:"input change undo redo",text:"readonly-text-output"};o[0]!==void 0&&(i.value=o[0]),e=new oe({props:i,$$inline:!0}),D.push(()=>de(e,"value",s));const d={c:function(){ue(e.$$.fragment)},l:function(r){fe(e.$$.fragment,r)},m:function(r,h){me(e,r,h),a=!0},p:function(r,[h]){const w={};h&2&&(w.id=r[1]),!n&&h&1&&(n=!0,w.value=r[0],le(()=>n=!1)),e.$set(w)},i:function(r){a||(he(e.$$.fragment,r),a=!0)},o:function(r){ge(e.$$.fragment,r),a=!1},d:function(r){we(e,r)}};return P("SvelteRegisterBlock",{block:d,id:K.name,type:"component",source:"",ctx:o}),d}function ve(o,e,n){let{$$slots:a={},$$scope:s}=e;$("Editor",a,[]);let{text:i=""}=e;i=i??"";let{id:d=""}=e;const c=q.get("uploadRepository"),r={plugins:"image table",toolbar1:"newdocument fullpage | blocks fontfamily fontsize | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | styleselect formatselect fontselect fontsizeselect | heading",toolbar2:"image | media | cut copy paste | searchreplace | bullist numlist | outdent indent blockquote | undo redo | link unlink anchor code | insertdatetime preview | forecolor backcolor",toolbar3:"table | hr removeformat | subscript superscript | charmap emoticons | print fullscreen | ltr rtl | spellchecker | visualchars visualblocks nonbreaking template pagebreak restoredraft",menubar:!1,file_picker_types:"image",async file_picker_callback(l,b,_){var f=document.createElement("input");f.setAttribute("type","file"),f.setAttribute("accept","image/*"),f.onchange=async function(){var y;var E=this.files[0];const p=new FormData;p.append("file",E);try{const u=await c.uploadFileEditor(p);console.log(u),l(G+((y=u==null?void 0:u.data)==null?void 0:y.location),{alt:""})}catch{N.set([{message:"File upload failed",type:"error"}])}},f.click()}},h=["text","id"];Object.keys(e).forEach(l=>{!~h.indexOf(l)&&l.slice(0,2)!=="$$"&&l!=="slot"&&pe.warn(`<Editor> was created with unknown prop '${l}'`)});function w(l){i=l,n(0,i)}return o.$$set=l=>{"text"in l&&n(0,i=l.text),"id"in l&&n(1,d=l.id)},o.$capture_state=()=>({HOST:G,RepositoryFactory:q,toastErr:N,Editor:oe,text:i,id:d,uploadFileService:c,conf:r}),o.$inject_state=l=>{"text"in l&&n(0,i=l.text),"id"in l&&n(1,d=l.id)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),[i,d,r,w]}class De extends Y{constructor(e){super(e),Z(this,e,ve,K,Q,{text:0,id:1}),P("SvelteRegisterComponent",{component:this,tagName:"Editor_1",options:e,id:K.name})}get text(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set text(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get id(){throw new Error("<Editor>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set id(e){throw new Error("<Editor>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{De as E};
