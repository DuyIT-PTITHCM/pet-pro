import{s as Ue,f as ye,g as h,c as w,l as ae,h as _,i as C,d as k,m as re,S as qe,k as v,T as ze,R as xe,U as lt,w as ct}from"../chunks/scheduler.45014ca4.js";import{S as Ze,i as Je,d as H,w as Ee,v as Ke,j as S,k as L,e as f,g as u,a as T,m as j,n as l,b as D,t as M,l as R}from"../chunks/index.f7d6e5c4.js";import{B as Qe}from"../chunks/Button.2e1dff00.js";import"../chunks/Indicator.svelte_svelte_type_style_lang.ea3d09bf.js";import{D as We}from"../chunks/DarkMode.c1d3ccdb.js";import{L as Pe,C as Xe}from"../chunks/Checkbox.f43a5046.js";import{I as Ie,B as Ne}from"../chunks/Const.e278f065.js";import{H as Ce,c as Te}from"../chunks/axiosServer.9f90a039.js";import{s as Fe}from"../chunks/cookieUtils.9487ed92.js";import{t as ce}from"../chunks/toastError.0ab656d3.js";import{l as ue}from"../chunks/loading.f56a2a02.js";import{T as Ye}from"../chunks/ToastError.90d2e768.js";const b="src/lib/components/admin/login/Login.svelte";function et(n){let e;const r={c:function(){e=ae("Email")},l:function(t){e=re(t,"Email")},m:function(t,s){T(t,e,s)},d:function(t){t&&f(e)}};return H("SvelteRegisterBlock",{block:r,id:et.name,type:"slot",source:'(99:20) <Label for=\\"email\\" class=\\"block mb-2\\">',ctx:n}),r}function tt(n){let e;const r={c:function(){e=ae("Password")},l:function(t){e=re(t,"Password")},m:function(t,s){T(t,e,s)},d:function(t){t&&f(e)}};return H("SvelteRegisterBlock",{block:r,id:tt.name,type:"slot",source:'(108:20) <Label for=\\"password\\" class=\\"block mb-2\\" title=\\"Password should be at least 8 characters long and contain at least one digit and one special character\\">',ctx:n}),r}function nt(n){let e;const r={c:function(){e=ae("Remember me")},l:function(t){e=re(t,"Remember me")},m:function(t,s){T(t,e,s)},d:function(t){t&&f(e)}};return H("SvelteRegisterBlock",{block:r,id:nt.name,type:"slot",source:"(117:20) <Checkbox bind:checked={user.rememberMe}                         >",ctx:n}),r}function st(n){let e;const r={c:function(){e=ae("Log In")},l:function(t){e=re(t,"Log In")},m:function(t,s){T(t,e,s)},d:function(t){t&&f(e)}};return H("SvelteRegisterBlock",{block:r,id:st.name,type:"slot",source:'(126:16) <Button on:click={handleSubmitLogin} type=\\"submit\\" class=\\"w-full\\"                     >',ctx:n}),r}function Se(n){let e,r,i,t,s,m,p,o,g,oe,ee,c,d,y,P,te,B,fe,me,U,de,I,F,$e,V,pe,ge,Z,he,O,A,_e,ve,q,je="Forgot password ?",be,z,we,N,De="Sign up for Pet One",ke,J,G,Me,ie;r=new We({$$inline:!0}),P=new Pe({props:{for:"email",class:"block mb-2",$$slots:{default:[et]},$$scope:{ctx:n}},$$inline:!0});function rt(x){n[2](x)}let Re={type:"email",placeholder:"Enter your email"};n[0].email!==void 0&&(Re.value=n[0].email),B=new Ie({props:Re,$$inline:!0}),ye.push(()=>Ee(B,"value",rt)),U=new Ce({props:{class:"mt-2"},$$inline:!0}),F=new Pe({props:{for:"password",class:"block mb-2",title:"Password should be at least 8 characters long and contain at least one digit and one special character",$$slots:{default:[tt]},$$scope:{ctx:n}},$$inline:!0});function ot(x){n[3](x)}let Be={type:"password",placeholder:"Enter your password"};n[0].password!==void 0&&(Be.value=n[0].password),V=new Ie({props:Be,$$inline:!0}),ye.push(()=>Ee(V,"value",ot)),Z=new Ce({props:{class:"mt-2"},$$inline:!0});function it(x){n[4](x)}let Ve={$$slots:{default:[nt]},$$scope:{ctx:n}};n[0].rememberMe!==void 0&&(Ve.checked=n[0].rememberMe),A=new Xe({props:Ve,$$inline:!0}),ye.push(()=>Ee(A,"checked",it)),z=new Qe({props:{type:"submit",class:"w-full",$$slots:{default:[st]},$$scope:{ctx:n}},$$inline:!0}),z.$on("click",n[1]);const Oe={c:function(){e=h("div"),S(r.$$.fragment),i=w(),t=h("div"),s=h("div"),m=h("div"),p=h("div"),o=h("a"),g=h("img"),ee=ae(`
                    PetOne`),c=w(),d=h("form"),y=h("div"),S(P.$$.fragment),te=w(),S(B.$$.fragment),me=w(),S(U.$$.fragment),de=w(),I=h("div"),S(F.$$.fragment),$e=w(),S(V.$$.fragment),ge=w(),S(Z.$$.fragment),he=w(),O=h("div"),S(A.$$.fragment),ve=w(),q=h("a"),q.textContent=je,be=w(),S(z.$$.fragment),we=w(),N=h("a"),N.textContent=De,ke=w(),J=h("div"),G=h("img"),this.h()},l:function(a){e=_(a,"DIV",{class:!0});var $=C(e);L(r.$$.fragment,$),$.forEach(f),i=k(a),t=_(a,"DIV",{class:!0});var K=C(t);s=_(K,"DIV",{class:!0});var ne=C(s);m=_(ne,"DIV",{class:!0});var Q=C(m);p=_(Q,"DIV",{class:!0});var se=C(p);o=_(se,"A",{href:!0,class:!0});var W=C(o);g=_(W,"IMG",{class:!0,src:!0,alt:!0}),ee=re(W,`
                    PetOne`),W.forEach(f),se.forEach(f),c=k(Q),d=_(Q,"FORM",{class:!0});var E=C(d);y=_(E,"DIV",{class:!0});var X=C(y);L(P.$$.fragment,X),te=k(X),L(B.$$.fragment,X),me=k(X),L(U.$$.fragment,X),X.forEach(f),de=k(E),I=_(E,"DIV",{class:!0});var Y=C(I);L(F.$$.fragment,Y),$e=k(Y),L(V.$$.fragment,Y),ge=k(Y),L(Z.$$.fragment,Y),Y.forEach(f),he=k(E),O=_(E,"DIV",{class:!0});var le=C(O);L(A.$$.fragment,le),ve=k(le),q=_(le,"A",{href:!0,class:!0,"data-svelte-h":!0}),qe(q)!=="svelte-1fkfff4"&&(q.textContent=je),le.forEach(f),be=k(E),L(z.$$.fragment,E),we=k(E),N=_(E,"A",{href:!0,class:!0,"data-svelte-h":!0}),qe(N)!=="svelte-1kfjhtd"&&(N.textContent=De),E.forEach(f),Q.forEach(f),ne.forEach(f),ke=k(K),J=_(K,"DIV",{class:!0});var Ae=C(J);G=_(Ae,"IMG",{class:!0,src:!0,alt:!0}),Ae.forEach(f),K.forEach(f),this.h()},h:function(){u(e,"class","darkmode fixed top-2 right-2 rounded-lg z-50 bg-slate-200 dark:bg-slate-900"),v(e,b,78,0,1685),u(g,"class","w-10 h-10 mr-2 rounded-full"),ze(g.src,oe="https://static.vecteezy.com/system/resources/previews/009/551/676/original/shy-dog-logo-illustration-depicting-shy-dog-suitable-for-pet-company-free-vector.jpg")||u(g,"src",oe),u(g,"alt","logo"),v(g,b,95,20,2358),u(o,"href","/"),u(o,"class","flex items-center text-3xl font-semibold text-gray-900 dark:text-white"),v(o,b,91,16,2189),u(p,"class","w-full flex justify-center my-5"),v(p,b,90,12,2127),u(y,"class","mb-6"),v(y,b,104,16,2804),u(I,"class","mb-6"),v(I,b,113,16,3168),u(q,"href","/"),u(q,"class","text-primary-600 dark+:text-primary-500 hover:underline font-bold text-sm"),v(q,b,126,20,3843),u(O,"class","flex justify-between"),v(O,b,122,16,3658),u(N,"href","/signup"),u(N,"class","text-primary-600 dark+:text-primary-500 hover:underline font-bold text-sm text-right w-full block"),v(N,b,135,16,4228),u(d,"class","space-y-4 md:space-y-6"),v(d,b,103,12,2750),u(m,"class","p-6 space-y-4 md:space-y-6 sm:p-8"),v(m,b,89,8,2067),u(s,"class","w-full bg-white rounded-lg shadow-lg dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700 z-10"),v(s,b,86,4,1913),u(G,"class","w-full h-full object-cover"),ze(G.src,Me="/images/loginbg.jpg")||u(G,"src",Me),u(G,"alt",""),v(G,b,144,8,4583),u(J,"class","absolute w-full h-full dark:brightness-50 transition-all"),v(J,b,143,4,4504),u(t,"class","relative flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0"),v(t,b,83,0,1804)},m:function(a,$){T(a,e,$),j(r,e,null),T(a,i,$),T(a,t,$),l(t,s),l(s,m),l(m,p),l(p,o),l(o,g),l(o,ee),l(m,c),l(m,d),l(d,y),j(P,y,null),l(y,te),j(B,y,null),l(y,me),j(U,y,null),l(d,de),l(d,I),j(F,I,null),l(I,$e),j(V,I,null),l(I,ge),j(Z,I,null),l(d,he),l(d,O),j(A,O,null),l(O,ve),l(O,q),l(d,be),j(z,d,null),l(d,we),l(d,N),l(t,ke),l(t,J),l(J,G),ie=!0},p:function(a,[$]){const K={};$&64&&(K.$$scope={dirty:$,ctx:a}),P.$set(K);const ne={};!fe&&$&1&&(fe=!0,ne.value=a[0].email,xe(()=>fe=!1)),B.$set(ne);const Q={};$&64&&(Q.$$scope={dirty:$,ctx:a}),F.$set(Q);const se={};!pe&&$&1&&(pe=!0,se.value=a[0].password,xe(()=>pe=!1)),V.$set(se);const W={};$&64&&(W.$$scope={dirty:$,ctx:a}),!_e&&$&1&&(_e=!0,W.checked=a[0].rememberMe,xe(()=>_e=!1)),A.$set(W);const E={};$&64&&(E.$$scope={dirty:$,ctx:a}),z.$set(E)},i:function(a){ie||(D(r.$$.fragment,a),D(P.$$.fragment,a),D(B.$$.fragment,a),D(U.$$.fragment,a),D(F.$$.fragment,a),D(V.$$.fragment,a),D(Z.$$.fragment,a),D(A.$$.fragment,a),D(z.$$.fragment,a),ie=!0)},o:function(a){M(r.$$.fragment,a),M(P.$$.fragment,a),M(B.$$.fragment,a),M(U.$$.fragment,a),M(F.$$.fragment,a),M(V.$$.fragment,a),M(Z.$$.fragment,a),M(A.$$.fragment,a),M(z.$$.fragment,a),ie=!1},d:function(a){a&&(f(e),f(i),f(t)),R(r),R(P),R(B),R(U),R(F),R(V),R(Z),R(A),R(z)}};return H("SvelteRegisterBlock",{block:Oe,id:Se.name,type:"component",source:"",ctx:n}),Oe}function Ge(n=""){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}function He(n=""){return/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-zA-Z]).{8,}$/.test(n)}function ut(n,e,r){let{$$slots:i={},$$scope:t}=e;Ke("Login",i,[]);let s={email:"",password:"",rememberMe:!1};async function m(){Ge(s.email)?He(s.password)?p():ce.set([{message:"Password is not valid",type:"error"}]):ce.set([{message:"Email is not valid",type:"error"}])}async function p(){var c,d;try{ue.set(!0);const P=await Te().post(`${Ne}/auth/login`,s),te=s.rememberMe?30:1;Fe("access_token",(d=(c=P==null?void 0:P.data)==null?void 0:c.data)==null?void 0:d.token,{expires:te}),ue.set(!1),window.location.href="/"}catch{ue.set(!1),ce.set([{message:"Login fail! Email or password incorrect",type:"error"}])}}const o=[];Object.keys(e).forEach(c=>{!~o.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<Login> was created with unknown prop '${c}'`)});function g(c){n.$$.not_equal(s.email,c)&&(s.email=c,r(0,s))}function oe(c){n.$$.not_equal(s.password,c)&&(s.password=c,r(0,s))}function ee(c){n.$$.not_equal(s.rememberMe,c)&&(s.rememberMe=c,r(0,s))}return n.$capture_state=()=>({Button:Qe,Checkbox:Xe,DarkMode:We,Label:Pe,Input:Ie,Helper:Ce,createAxiosClient:Te,BASE_API:Ne,setCookie:Fe,toastErr:ce,loadingState:ue,user:s,validateEmail:Ge,validatePassword:He,handleSubmitLogin:m,userLogin:p}),n.$inject_state=c=>{"user"in c&&r(0,s=c.user)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[s,m,g,oe,ee]}class at extends Ze{constructor(e){super(e),Je(this,e,ut,Se,Ue,{}),H("SvelteRegisterComponent",{component:this,tagName:"Login",options:e,id:Se.name})}}function Le(n){let e,r,i,t,s;r=new at({$$inline:!0}),t=new Ye({$$inline:!0});const m={c:function(){e=w(),S(r.$$.fragment),i=w(),S(t.$$.fragment),this.h()},l:function(o){lt("svelte-xyf4ii",document.head).forEach(f),e=k(o),L(r.$$.fragment,o),i=k(o),L(t.$$.fragment,o),this.h()},h:function(){document.title=`
        Đăng Nhập
    `},m:function(o,g){T(o,e,g),j(r,o,g),T(o,i,g),j(t,o,g),s=!0},p:ct,i:function(o){s||(D(r.$$.fragment,o),D(t.$$.fragment,o),s=!0)},o:function(o){M(r.$$.fragment,o),M(t.$$.fragment,o),s=!1},d:function(o){o&&(f(e),f(i)),R(r,o),R(t,o)}};return H("SvelteRegisterBlock",{block:m,id:Le.name,type:"component",source:"",ctx:n}),m}function ft(n,e,r){let{$$slots:i={},$$scope:t}=e;Ke("Page",i,[]);const s=[];return Object.keys(e).forEach(m=>{!~s.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<Page> was created with unknown prop '${m}'`)}),n.$capture_state=()=>({Login:at,ToastError:Ye}),[]}class xt extends Ze{constructor(e){super(e),Je(this,e,ft,Le,Ue,{}),H("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Le.name})}}export{xt as component};
