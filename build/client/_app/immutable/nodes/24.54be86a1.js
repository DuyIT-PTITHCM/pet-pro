import{s as Ue,f as ye,g as _,c as y,l as re,h as v,i as S,d as x,m as oe,S as qe,k as b,T as ze,R as xe,U as lt,w as ct}from"../chunks/scheduler.17f854f6.js";import{S as Ze,i as Je,d as H,w as Ee,v as Ke,j as L,k as j,e as f,g as u,a as T,m as D,n as l,b as M,t as R,l as B}from"../chunks/index.9074fff2.js";import{B as Qe}from"../chunks/Button.f37396ce.js";import"../chunks/Indicator.svelte_svelte_type_style_lang.9fd53eb3.js";import{D as We}from"../chunks/DarkMode.f778bceb.js";import{L as Pe,C as Xe}from"../chunks/Checkbox.aa30736b.js";import{I as Ie}from"../chunks/Input.de419b0f.js";import{H as Ce,c as Ne}from"../chunks/axiosServer.8ecb852d.js";import{B as Te}from"../chunks/Const.9014b5a8.js";import{s as Fe}from"../chunks/cookieUtils.9487ed92.js";import{t as ue}from"../chunks/toastError.75d8df4c.js";import{l as fe}from"../chunks/loading.2fa600dc.js";import{T as Ye}from"../chunks/ToastError.f03119f4.js";const w="src/lib/components/admin/login/Login.svelte";function et(n){let e;const r={c:function(){e=re("Email")},l:function(t){e=oe(t,"Email")},m:function(t,s){T(t,e,s)},d:function(t){t&&f(e)}};return H("SvelteRegisterBlock",{block:r,id:et.name,type:"slot",source:'(99:20) <Label for=\\"email\\" class=\\"block mb-2\\">',ctx:n}),r}function tt(n){let e;const r={c:function(){e=re("Password")},l:function(t){e=oe(t,"Password")},m:function(t,s){T(t,e,s)},d:function(t){t&&f(e)}};return H("SvelteRegisterBlock",{block:r,id:tt.name,type:"slot",source:'(108:20) <Label                         for=\\"password\\"                         class=\\"block mb-2\\"                         title=\\"Password should be at least 8 characters long and contain at least one digit and one special character\\"                         >',ctx:n}),r}function nt(n){let e;const r={c:function(){e=re("Remember me")},l:function(t){e=oe(t,"Remember me")},m:function(t,s){T(t,e,s)},d:function(t){t&&f(e)}};return H("SvelteRegisterBlock",{block:r,id:nt.name,type:"slot",source:"(122:20) <Checkbox bind:checked={user.rememberMe}                         >",ctx:n}),r}function st(n){let e;const r={c:function(){e=re("Log In")},l:function(t){e=oe(t,"Log In")},m:function(t,s){T(t,e,s)},d:function(t){t&&f(e)}};return H("SvelteRegisterBlock",{block:r,id:st.name,type:"slot",source:'(131:16) <Button                     on:click={handleSubmitLogin}                     type=\\"submit\\"                     class=\\"w-full\\">',ctx:n}),r}function Se(n){let e,r,i,t,s,m,p,o,g,ie,ee,c,d,k,I,te,h,ne,me,U,de,C,F,$e,V,pe,ge,Z,he,O,A,_e,ve,q,je="Forgot password ?",be,z,we,N,De="Sign up for Pet One",ke,J,G,Me,le;r=new We({$$inline:!0}),I=new Pe({props:{for:"email",class:"block mb-2",$$slots:{default:[et]},$$scope:{ctx:n}},$$inline:!0});function rt(E){n[2](E)}let Re={type:"email",placeholder:"Enter your email"};n[0].email!==void 0&&(Re.value=n[0].email),h=new Ie({props:Re,$$inline:!0}),ye.push(()=>Ee(h,"value",rt)),U=new Ce({props:{class:"mt-2"},$$inline:!0}),F=new Pe({props:{for:"password",class:"block mb-2",title:"Password should be at least 8 characters long and contain at least one digit and one special character",$$slots:{default:[tt]},$$scope:{ctx:n}},$$inline:!0});function ot(E){n[3](E)}let Be={type:"password",placeholder:"Enter your password"};n[0].password!==void 0&&(Be.value=n[0].password),V=new Ie({props:Be,$$inline:!0}),ye.push(()=>Ee(V,"value",ot)),Z=new Ce({props:{class:"mt-2"},$$inline:!0});function it(E){n[4](E)}let Ve={$$slots:{default:[nt]},$$scope:{ctx:n}};n[0].rememberMe!==void 0&&(Ve.checked=n[0].rememberMe),A=new Xe({props:Ve,$$inline:!0}),ye.push(()=>Ee(A,"checked",it)),z=new Qe({props:{type:"submit",class:"w-full",$$slots:{default:[st]},$$scope:{ctx:n}},$$inline:!0}),z.$on("click",n[1]);const Oe={c:function(){e=_("div"),L(r.$$.fragment),i=y(),t=_("div"),s=_("div"),m=_("div"),p=_("div"),o=_("a"),g=_("img"),ee=re(`
                    PetOne`),c=y(),d=_("form"),k=_("div"),L(I.$$.fragment),te=y(),L(h.$$.fragment),me=y(),L(U.$$.fragment),de=y(),C=_("div"),L(F.$$.fragment),$e=y(),L(V.$$.fragment),ge=y(),L(Z.$$.fragment),he=y(),O=_("div"),L(A.$$.fragment),ve=y(),q=_("a"),q.textContent=je,be=y(),L(z.$$.fragment),we=y(),N=_("a"),N.textContent=De,ke=y(),J=_("div"),G=_("img"),this.h()},l:function(a){e=v(a,"DIV",{class:!0});var $=S(e);j(r.$$.fragment,$),$.forEach(f),i=x(a),t=v(a,"DIV",{class:!0});var K=S(t);s=v(K,"DIV",{class:!0});var se=S(s);m=v(se,"DIV",{class:!0});var Q=S(m);p=v(Q,"DIV",{class:!0});var ae=S(p);o=v(ae,"A",{href:!0,class:!0});var W=S(o);g=v(W,"IMG",{class:!0,src:!0,alt:!0}),ee=oe(W,`
                    PetOne`),W.forEach(f),ae.forEach(f),c=x(Q),d=v(Q,"FORM",{class:!0});var P=S(d);k=v(P,"DIV",{class:!0});var X=S(k);j(I.$$.fragment,X),te=x(X),j(h.$$.fragment,X),me=x(X),j(U.$$.fragment,X),X.forEach(f),de=x(P),C=v(P,"DIV",{class:!0});var Y=S(C);j(F.$$.fragment,Y),$e=x(Y),j(V.$$.fragment,Y),ge=x(Y),j(Z.$$.fragment,Y),Y.forEach(f),he=x(P),O=v(P,"DIV",{class:!0});var ce=S(O);j(A.$$.fragment,ce),ve=x(ce),q=v(ce,"A",{href:!0,class:!0,"data-svelte-h":!0}),qe(q)!=="svelte-1fkfff4"&&(q.textContent=je),ce.forEach(f),be=x(P),j(z.$$.fragment,P),we=x(P),N=v(P,"A",{href:!0,class:!0,"data-svelte-h":!0}),qe(N)!=="svelte-1kfjhtd"&&(N.textContent=De),P.forEach(f),Q.forEach(f),se.forEach(f),ke=x(K),J=v(K,"DIV",{class:!0});var Ae=S(J);G=v(Ae,"IMG",{class:!0,src:!0,alt:!0}),Ae.forEach(f),K.forEach(f),this.h()},h:function(){u(e,"class","darkmode fixed top-2 right-2 rounded-lg z-50 bg-slate-200 dark:bg-slate-900"),b(e,w,78,0,1714),u(g,"class","w-10 h-10 mr-2 rounded-full"),ze(g.src,ie="https://static.vecteezy.com/system/resources/previews/009/551/676/original/shy-dog-logo-illustration-depicting-shy-dog-suitable-for-pet-company-free-vector.jpg")||u(g,"src",ie),u(g,"alt","logo"),b(g,w,95,20,2387),u(o,"href","/"),u(o,"class","flex items-center text-3xl font-semibold text-gray-900 dark:text-white"),b(o,w,91,16,2218),u(p,"class","w-full flex justify-center my-5"),b(p,w,90,12,2156),u(k,"class","mb-6"),b(k,w,104,16,2833),u(C,"class","mb-6"),b(C,w,113,16,3197),u(q,"href","/"),u(q,"class","text-primary-600 dark+:text-primary-500 hover:underline font-bold text-sm"),b(q,w,131,20,3990),u(O,"class","flex justify-between"),b(O,w,127,16,3805),u(N,"href","/signup"),u(N,"class","text-primary-600 dark+:text-primary-500 hover:underline font-bold text-sm text-right w-full block"),b(N,w,142,16,4414),u(d,"class","space-y-4 md:space-y-6"),b(d,w,103,12,2779),u(m,"class","p-6 space-y-4 md:space-y-6 sm:p-8"),b(m,w,89,8,2096),u(s,"class","w-full bg-white rounded-lg shadow-lg dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700 z-10"),b(s,w,86,4,1942),u(G,"class","w-full h-full object-cover"),ze(G.src,Me="/images/loginbg.jpg")||u(G,"src",Me),u(G,"alt",""),b(G,w,151,8,4769),u(J,"class","absolute w-full h-full dark:brightness-50 transition-all"),b(J,w,150,4,4690),u(t,"class","relative flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0"),b(t,w,83,0,1833)},m:function(a,$){T(a,e,$),D(r,e,null),T(a,i,$),T(a,t,$),l(t,s),l(s,m),l(m,p),l(p,o),l(o,g),l(o,ee),l(m,c),l(m,d),l(d,k),D(I,k,null),l(k,te),D(h,k,null),l(k,me),D(U,k,null),l(d,de),l(d,C),D(F,C,null),l(C,$e),D(V,C,null),l(C,ge),D(Z,C,null),l(d,he),l(d,O),D(A,O,null),l(O,ve),l(O,q),l(d,be),D(z,d,null),l(d,we),l(d,N),l(t,ke),l(t,J),l(J,G),le=!0},p:function(a,[$]){const K={};$&64&&(K.$$scope={dirty:$,ctx:a}),I.$set(K);const se={};!ne&&$&1&&(ne=!0,se.value=a[0].email,xe(()=>ne=!1)),h.$set(se);const Q={};$&64&&(Q.$$scope={dirty:$,ctx:a}),F.$set(Q);const ae={};!pe&&$&1&&(pe=!0,ae.value=a[0].password,xe(()=>pe=!1)),V.$set(ae);const W={};$&64&&(W.$$scope={dirty:$,ctx:a}),!_e&&$&1&&(_e=!0,W.checked=a[0].rememberMe,xe(()=>_e=!1)),A.$set(W);const P={};$&64&&(P.$$scope={dirty:$,ctx:a}),z.$set(P)},i:function(a){le||(M(r.$$.fragment,a),M(I.$$.fragment,a),M(h.$$.fragment,a),M(U.$$.fragment,a),M(F.$$.fragment,a),M(V.$$.fragment,a),M(Z.$$.fragment,a),M(A.$$.fragment,a),M(z.$$.fragment,a),le=!0)},o:function(a){R(r.$$.fragment,a),R(I.$$.fragment,a),R(h.$$.fragment,a),R(U.$$.fragment,a),R(F.$$.fragment,a),R(V.$$.fragment,a),R(Z.$$.fragment,a),R(A.$$.fragment,a),R(z.$$.fragment,a),le=!1},d:function(a){a&&(f(e),f(i),f(t)),B(r),B(I),B(h),B(U),B(F),B(V),B(Z),B(A),B(z)}};return H("SvelteRegisterBlock",{block:Oe,id:Se.name,type:"component",source:"",ctx:n}),Oe}function Ge(n=""){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}function He(n=""){return/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-zA-Z]).{8,}$/.test(n)}function ut(n,e,r){let{$$slots:i={},$$scope:t}=e;Ke("Login",i,[]);let s={email:"",password:"",rememberMe:!1};async function m(){Ge(s.email)?He(s.password)?p():ue.set([{message:"Password is not valid",type:"error"}]):ue.set([{message:"Email is not valid",type:"error"}])}async function p(){var c,d,k,I;try{fe.set(!0);const h=await Ne().post(`${Te}/auth/login`,s),ne=s.rememberMe?30:1;Fe("access_token",(d=(c=h==null?void 0:h.data)==null?void 0:c.data)==null?void 0:d.token,{expires:ne}),fe.set(!1),window.location.href="/"+((I=(k=h==null?void 0:h.data)==null?void 0:k.data)==null?void 0:I.role)}catch{fe.set(!1),ue.set([{message:"Login fail! Email or password incorrect",type:"error"}])}}const o=[];Object.keys(e).forEach(c=>{!~o.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<Login> was created with unknown prop '${c}'`)});function g(c){n.$$.not_equal(s.email,c)&&(s.email=c,r(0,s))}function ie(c){n.$$.not_equal(s.password,c)&&(s.password=c,r(0,s))}function ee(c){n.$$.not_equal(s.rememberMe,c)&&(s.rememberMe=c,r(0,s))}return n.$capture_state=()=>({Button:Qe,Checkbox:Xe,DarkMode:We,Label:Pe,Input:Ie,Helper:Ce,createAxiosClient:Ne,BASE_API:Te,setCookie:Fe,toastErr:ue,loadingState:fe,user:s,validateEmail:Ge,validatePassword:He,handleSubmitLogin:m,userLogin:p}),n.$inject_state=c=>{"user"in c&&r(0,s=c.user)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[s,m,g,ie,ee]}class at extends Ze{constructor(e){super(e),Je(this,e,ut,Se,Ue,{}),H("SvelteRegisterComponent",{component:this,tagName:"Login",options:e,id:Se.name})}}function Le(n){let e,r,i,t,s;r=new at({$$inline:!0}),t=new Ye({$$inline:!0});const m={c:function(){e=y(),L(r.$$.fragment),i=y(),L(t.$$.fragment),this.h()},l:function(o){lt("svelte-xyf4ii",document.head).forEach(f),e=x(o),j(r.$$.fragment,o),i=x(o),j(t.$$.fragment,o),this.h()},h:function(){document.title=`
        Đăng Nhập
    `},m:function(o,g){T(o,e,g),D(r,o,g),T(o,i,g),D(t,o,g),s=!0},p:ct,i:function(o){s||(M(r.$$.fragment,o),M(t.$$.fragment,o),s=!0)},o:function(o){R(r.$$.fragment,o),R(t.$$.fragment,o),s=!1},d:function(o){o&&(f(e),f(i)),B(r,o),B(t,o)}};return H("SvelteRegisterBlock",{block:m,id:Le.name,type:"component",source:"",ctx:n}),m}function ft(n,e,r){let{$$slots:i={},$$scope:t}=e;Ke("Page",i,[]);const s=[];return Object.keys(e).forEach(m=>{!~s.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<Page> was created with unknown prop '${m}'`)}),n.$capture_state=()=>({Login:at,ToastError:Ye}),[]}class Et extends Ze{constructor(e){super(e),Je(this,e,ft,Le,Ue,{}),H("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Le.name})}}export{Et as component};
