import{s as He,f as ke,g as h,c as w,l as ae,h as _,i as C,d as k,m as re,S as Ae,k as v,T as qe,R as ye,U as it,w as lt}from"../chunks/scheduler.45014ca4.js";import{S as Ue,i as Ze,d as H,w as xe,v as Je,j as L,k as S,e as f,g as u,a as T,m as j,n as l,b as D,t as M,l as R}from"../chunks/index.f7d6e5c4.js";import{B as Ke}from"../chunks/Wrapper.8d44b2d6.js";import"../chunks/Icon.825a7e11.js";import{D as Qe}from"../chunks/DarkMode.6b9179d9.js";import{L as Ee,C as We,t as ce}from"../chunks/toastError.2fbdc542.js";import{I as Pe,H as Ie,c as ze,B as Ne}from"../chunks/axiosServer.b5fff88d.js";import{s as Te}from"../chunks/cookieUtils.9487ed92.js";import{T as Xe}from"../chunks/ToastError.78a1fa54.js";const b="src/lib/components/admin/login/Login.svelte";function Ye(n){let e;const r={c:function(){e=ae("Email")},l:function(t){e=re(t,"Email")},m:function(t,s){T(t,e,s)},d:function(t){t&&f(e)}};return H("SvelteRegisterBlock",{block:r,id:Ye.name,type:"slot",source:'(95:20) <Label for=\\"email\\" class=\\"block mb-2\\">',ctx:n}),r}function et(n){let e;const r={c:function(){e=ae("Password")},l:function(t){e=re(t,"Password")},m:function(t,s){T(t,e,s)},d:function(t){t&&f(e)}};return H("SvelteRegisterBlock",{block:r,id:et.name,type:"slot",source:'(104:20) <Label for=\\"password\\" class=\\"block mb-2\\" title=\\"Password should be at least 8 characters long and contain at least one digit and one special character\\">',ctx:n}),r}function tt(n){let e;const r={c:function(){e=ae("Remember me")},l:function(t){e=re(t,"Remember me")},m:function(t,s){T(t,e,s)},d:function(t){t&&f(e)}};return H("SvelteRegisterBlock",{block:r,id:tt.name,type:"slot",source:"(113:20) <Checkbox bind:checked={user.rememberMe}                         >",ctx:n}),r}function nt(n){let e;const r={c:function(){e=ae("Log In")},l:function(t){e=re(t,"Log In")},m:function(t,s){T(t,e,s)},d:function(t){t&&f(e)}};return H("SvelteRegisterBlock",{block:r,id:nt.name,type:"slot",source:'(122:16) <Button on:click={handleSubmitLogin} type=\\"submit\\" class=\\"w-full\\"                     >',ctx:n}),r}function Ce(n){let e,r,i,t,s,m,p,o,g,oe,ee,c,d,y,P,te,B,ue,fe,U,me,I,F,de,V,$e,pe,Z,ge,O,A,he,_e,q,Se="Forgot password ?",ve,z,be,N,je="Sign up for Pet One",we,J,G,De,ie;r=new Qe({$$inline:!0}),P=new Ee({props:{for:"email",class:"block mb-2",$$slots:{default:[Ye]},$$scope:{ctx:n}},$$inline:!0});function at(x){n[2](x)}let Me={type:"email",placeholder:"Enter your email"};n[0].email!==void 0&&(Me.value=n[0].email),B=new Pe({props:Me,$$inline:!0}),ke.push(()=>xe(B,"value",at)),U=new Ie({props:{class:"mt-2"},$$inline:!0}),F=new Ee({props:{for:"password",class:"block mb-2",title:"Password should be at least 8 characters long and contain at least one digit and one special character",$$slots:{default:[et]},$$scope:{ctx:n}},$$inline:!0});function rt(x){n[3](x)}let Re={type:"password",placeholder:"Enter your password"};n[0].password!==void 0&&(Re.value=n[0].password),V=new Pe({props:Re,$$inline:!0}),ke.push(()=>xe(V,"value",rt)),Z=new Ie({props:{class:"mt-2"},$$inline:!0});function ot(x){n[4](x)}let Be={$$slots:{default:[tt]},$$scope:{ctx:n}};n[0].rememberMe!==void 0&&(Be.checked=n[0].rememberMe),A=new We({props:Be,$$inline:!0}),ke.push(()=>xe(A,"checked",ot)),z=new Ke({props:{type:"submit",class:"w-full",$$slots:{default:[nt]},$$scope:{ctx:n}},$$inline:!0}),z.$on("click",n[1]);const Ve={c:function(){e=h("div"),L(r.$$.fragment),i=w(),t=h("div"),s=h("div"),m=h("div"),p=h("div"),o=h("a"),g=h("img"),ee=ae(`
                    PetOne`),c=w(),d=h("form"),y=h("div"),L(P.$$.fragment),te=w(),L(B.$$.fragment),fe=w(),L(U.$$.fragment),me=w(),I=h("div"),L(F.$$.fragment),de=w(),L(V.$$.fragment),pe=w(),L(Z.$$.fragment),ge=w(),O=h("div"),L(A.$$.fragment),_e=w(),q=h("a"),q.textContent=Se,ve=w(),L(z.$$.fragment),be=w(),N=h("a"),N.textContent=je,we=w(),J=h("div"),G=h("img"),this.h()},l:function(a){e=_(a,"DIV",{class:!0});var $=C(e);S(r.$$.fragment,$),$.forEach(f),i=k(a),t=_(a,"DIV",{class:!0});var K=C(t);s=_(K,"DIV",{class:!0});var ne=C(s);m=_(ne,"DIV",{class:!0});var Q=C(m);p=_(Q,"DIV",{class:!0});var se=C(p);o=_(se,"A",{href:!0,class:!0});var W=C(o);g=_(W,"IMG",{class:!0,src:!0,alt:!0}),ee=re(W,`
                    PetOne`),W.forEach(f),se.forEach(f),c=k(Q),d=_(Q,"FORM",{class:!0});var E=C(d);y=_(E,"DIV",{class:!0});var X=C(y);S(P.$$.fragment,X),te=k(X),S(B.$$.fragment,X),fe=k(X),S(U.$$.fragment,X),X.forEach(f),me=k(E),I=_(E,"DIV",{class:!0});var Y=C(I);S(F.$$.fragment,Y),de=k(Y),S(V.$$.fragment,Y),pe=k(Y),S(Z.$$.fragment,Y),Y.forEach(f),ge=k(E),O=_(E,"DIV",{class:!0});var le=C(O);S(A.$$.fragment,le),_e=k(le),q=_(le,"A",{href:!0,class:!0,"data-svelte-h":!0}),Ae(q)!=="svelte-1fkfff4"&&(q.textContent=Se),le.forEach(f),ve=k(E),S(z.$$.fragment,E),be=k(E),N=_(E,"A",{href:!0,class:!0,"data-svelte-h":!0}),Ae(N)!=="svelte-1kfjhtd"&&(N.textContent=je),E.forEach(f),Q.forEach(f),ne.forEach(f),we=k(K),J=_(K,"DIV",{class:!0});var Oe=C(J);G=_(Oe,"IMG",{class:!0,src:!0,alt:!0}),Oe.forEach(f),K.forEach(f),this.h()},h:function(){u(e,"class","darkmode fixed top-2 right-2 rounded-lg z-50 bg-slate-200 dark:bg-slate-900"),v(e,b,74,0,1548),u(g,"class","w-10 h-10 mr-2 rounded-full"),qe(g.src,oe="https://static.vecteezy.com/system/resources/previews/009/551/676/original/shy-dog-logo-illustration-depicting-shy-dog-suitable-for-pet-company-free-vector.jpg")||u(g,"src",oe),u(g,"alt","logo"),v(g,b,91,20,2221),u(o,"href","/"),u(o,"class","flex items-center text-3xl font-semibold text-gray-900 dark:text-white"),v(o,b,87,16,2052),u(p,"class","w-full flex justify-center my-5"),v(p,b,86,12,1990),u(y,"class","mb-6"),v(y,b,100,16,2667),u(I,"class","mb-6"),v(I,b,109,16,3031),u(q,"href","/"),u(q,"class","text-primary-600 dark+:text-primary-500 hover:underline font-bold text-sm"),v(q,b,122,20,3706),u(O,"class","flex justify-between"),v(O,b,118,16,3521),u(N,"href","/signup"),u(N,"class","text-primary-600 dark+:text-primary-500 hover:underline font-bold text-sm text-right w-full block"),v(N,b,131,16,4091),u(d,"class","space-y-4 md:space-y-6"),v(d,b,99,12,2613),u(m,"class","p-6 space-y-4 md:space-y-6 sm:p-8"),v(m,b,85,8,1930),u(s,"class","w-full bg-white rounded-lg shadow-lg dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700 z-10"),v(s,b,82,4,1776),u(G,"class","w-full h-full object-cover"),qe(G.src,De="/images/loginbg.jpg")||u(G,"src",De),u(G,"alt",""),v(G,b,140,8,4446),u(J,"class","absolute w-full h-full dark:brightness-50 transition-all"),v(J,b,139,4,4367),u(t,"class","relative flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0"),v(t,b,79,0,1667)},m:function(a,$){T(a,e,$),j(r,e,null),T(a,i,$),T(a,t,$),l(t,s),l(s,m),l(m,p),l(p,o),l(o,g),l(o,ee),l(m,c),l(m,d),l(d,y),j(P,y,null),l(y,te),j(B,y,null),l(y,fe),j(U,y,null),l(d,me),l(d,I),j(F,I,null),l(I,de),j(V,I,null),l(I,pe),j(Z,I,null),l(d,ge),l(d,O),j(A,O,null),l(O,_e),l(O,q),l(d,ve),j(z,d,null),l(d,be),l(d,N),l(t,we),l(t,J),l(J,G),ie=!0},p:function(a,[$]){const K={};$&64&&(K.$$scope={dirty:$,ctx:a}),P.$set(K);const ne={};!ue&&$&1&&(ue=!0,ne.value=a[0].email,ye(()=>ue=!1)),B.$set(ne);const Q={};$&64&&(Q.$$scope={dirty:$,ctx:a}),F.$set(Q);const se={};!$e&&$&1&&($e=!0,se.value=a[0].password,ye(()=>$e=!1)),V.$set(se);const W={};$&64&&(W.$$scope={dirty:$,ctx:a}),!he&&$&1&&(he=!0,W.checked=a[0].rememberMe,ye(()=>he=!1)),A.$set(W);const E={};$&64&&(E.$$scope={dirty:$,ctx:a}),z.$set(E)},i:function(a){ie||(D(r.$$.fragment,a),D(P.$$.fragment,a),D(B.$$.fragment,a),D(U.$$.fragment,a),D(F.$$.fragment,a),D(V.$$.fragment,a),D(Z.$$.fragment,a),D(A.$$.fragment,a),D(z.$$.fragment,a),ie=!0)},o:function(a){M(r.$$.fragment,a),M(P.$$.fragment,a),M(B.$$.fragment,a),M(U.$$.fragment,a),M(F.$$.fragment,a),M(V.$$.fragment,a),M(Z.$$.fragment,a),M(A.$$.fragment,a),M(z.$$.fragment,a),ie=!1},d:function(a){a&&(f(e),f(i),f(t)),R(r),R(P),R(B),R(U),R(F),R(V),R(Z),R(A),R(z)}};return H("SvelteRegisterBlock",{block:Ve,id:Ce.name,type:"component",source:"",ctx:n}),Ve}function Fe(n=""){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)}function Ge(n=""){return/^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-zA-Z]).{8,}$/.test(n)}function ct(n,e,r){let{$$slots:i={},$$scope:t}=e;Je("Login",i,[]);let s={email:"",password:"",rememberMe:!1};async function m(){Fe(s.email)?Ge(s.password)?p():ce.set([{message:"Password is not valid",type:"error"}]):ce.set([{message:"Email is not valid",type:"error"}])}async function p(){var c,d;try{const P=await ze().post(`${Ne}/auth/login`,s),te=s.rememberMe?30:1;Te("access_token",(d=(c=P==null?void 0:P.data)==null?void 0:c.data)==null?void 0:d.token,{expires:te}),window.location.href="/"}catch{ce.set([{message:"Login fail! Email or password incorrect",type:"error"}])}}const o=[];Object.keys(e).forEach(c=>{!~o.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<Login> was created with unknown prop '${c}'`)});function g(c){n.$$.not_equal(s.email,c)&&(s.email=c,r(0,s))}function oe(c){n.$$.not_equal(s.password,c)&&(s.password=c,r(0,s))}function ee(c){n.$$.not_equal(s.rememberMe,c)&&(s.rememberMe=c,r(0,s))}return n.$capture_state=()=>({Button:Ke,Checkbox:We,DarkMode:Qe,Label:Ee,Input:Pe,Helper:Ie,createAxiosClient:ze,BASE_API:Ne,setCookie:Te,toastErr:ce,user:s,validateEmail:Fe,validatePassword:Ge,handleSubmitLogin:m,userLogin:p}),n.$inject_state=c=>{"user"in c&&r(0,s=c.user)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[s,m,g,oe,ee]}class st extends Ue{constructor(e){super(e),Ze(this,e,ct,Ce,He,{}),H("SvelteRegisterComponent",{component:this,tagName:"Login",options:e,id:Ce.name})}}function Le(n){let e,r,i,t,s;r=new st({$$inline:!0}),t=new Xe({$$inline:!0});const m={c:function(){e=w(),L(r.$$.fragment),i=w(),L(t.$$.fragment),this.h()},l:function(o){it("svelte-xyf4ii",document.head).forEach(f),e=k(o),S(r.$$.fragment,o),i=k(o),S(t.$$.fragment,o),this.h()},h:function(){document.title=`
        Đăng Nhập
    `},m:function(o,g){T(o,e,g),j(r,o,g),T(o,i,g),j(t,o,g),s=!0},p:lt,i:function(o){s||(D(r.$$.fragment,o),D(t.$$.fragment,o),s=!0)},o:function(o){M(r.$$.fragment,o),M(t.$$.fragment,o),s=!1},d:function(o){o&&(f(e),f(i)),R(r,o),R(t,o)}};return H("SvelteRegisterBlock",{block:m,id:Le.name,type:"component",source:"",ctx:n}),m}function ut(n,e,r){let{$$slots:i={},$$scope:t}=e;Je("Page",i,[]);const s=[];return Object.keys(e).forEach(m=>{!~s.indexOf(m)&&m.slice(0,2)!=="$$"&&m!=="slot"&&console.warn(`<Page> was created with unknown prop '${m}'`)}),n.$capture_state=()=>({Login:st,ToastError:Xe}),[]}class bt extends Ue{constructor(e){super(e),Ze(this,e,ut,Le,He,{}),H("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Le.name})}}export{bt as component};
